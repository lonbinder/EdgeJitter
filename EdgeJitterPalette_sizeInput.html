<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Jitter size configuration</title>
    <script>

        document.addEventListener("DOMContentLoaded", () => {
        let adskWaiter = setInterval(() => {
            if (window.adsk) {
                clearInterval(adskWaiter);

                adsk.fusionSendData("DOMContentLoaded", "{}")
                    .then((response) => {
                        document.getElementById("p1").innerHTML += '<br/>'+ response;
                    });
                
                const fields = document.querySelectorAll('input[type="number"], input[type="checkbox"]');
                fields.forEach(field => {
                    field.addEventListener('change', (event) => {
                        const fieldName = event.target.name;
                        const value = event.target.type === 'checkbox' ? event.target.checked : event.target.value;
                        const args = { field: fieldName, value: value };
                        adsk.fusionSendData("fieldChanged", JSON.stringify(args));
                    });
                });

                // Add click listener for the preview button
                document.addEventListener("click", (event) => {
                    if (event.target && event.target.id === "preview") {
                        let args = {
                            buttonName : 'preview'
                            };

                        adsk.fusionSendData("buttonPushed", JSON.stringify(args))
                            .then((response) => {
                            // Replace the content of <p id="p1"> with the response
                            document.getElementById("p1").innerHTML += '<br/>'+ response;
                            });
                    }
                });
            }
        }, 100);
        });
    </script>
</head>
<body>
    <label for="recurse">
        <input type="checkbox" id="recurse" name="recurse" />
        Recurse?
    </label>
    <br />
    <label for="minSize">Minimum cut size (cm):</label>
    <input type="number" id="minSize" name="minSize" min="1" max="50" value="" step="1">
    <br />
    <label for="maxSize">Maximum cut size (cm):</label>
    <input type="number" id="maxSize" name="maxSize" min="1" max="100" value="" step="1">
    <br />
    <button id="preview">Preview</button>
    <br />
    <div id="p1" style="margin-top: 20px; color: green; font-size: small;">
    </div>
</body>
</html>
